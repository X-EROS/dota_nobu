// Dota2 Editor
// Get latest version: https://github.com/zombieJ/nw-dota2editor

"DOTAAbilities"
{
	"Version"		"1"

	// Rewrite of the Viper Viper Strike ability
	// Author: Pizzalol
	// Date: 19.12.2014.
	// Changed: 15.01.2015.
	// NOTE: Wonky projectile particle
	// NOTE2: Edit the warmup particle and delete 3 out of 4 children for it to work properly (thanks to Noya for the info)
	"B33W"
	{
		// General
		// -------------------------------------------------------------------------------------------------------------
		"BaseClass"	"ability_datadriven"
		"AbilityTextureName"	"B33W"
		"AbilityBehavior"	"DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
		"AbilityUnitTargetType"	"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
		"AbilityUnitTargetTeam"	"DOTA_UNIT_TARGET_TEAM_ENEMY"
		"AbilityUnitTargetFlags"	"DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
		"AbilityUnitDamageType"	"DAMAGE_TYPE_MAGICAL"
		"SpellImmunityType"	"SPELL_IMMUNITY_ENEMIES_YES"
		"FightRecapLevel"	"2"
		"AbilityType"	"DOTA_ABILITY_TYPE_BASIC"
		"AbilityCastPoint"	"0.3"
		"AbilityCastAnimation"	"ACT_DOTA_ATTACK"
		"AnimationPlaybackRate"	"2"
		// Time
		// -------------------------------------------------------------------------------------------------------------
		"AbilityCooldown"	"12"
		// Cost
		// -------------------------------------------------------------------------------------------------------------
		"AbilityManaCost"	"80 110 140 170"
		// Casting
		// -------------------------------------------------------------------------------------------------------------
		"AbilityCastRange"	"850"
		// Precache
		// -------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"particle"	"particles/status_fx/status_effect_poison_viper.vpcf"
			"soundfile"	"soundevents/game_sounds_heroes/game_sounds_viper.vsndevts"
			"particle"	"particles/b33w/b33w.vpcf"
			"particle"	"particles/b33w3/b33w3.vpcf"
			"particle"	"particles/units/heroes/hero_viper/viper_viper_strike_debuff.vpcf"
			"particle"	"particles/b33w/b33w.vpcf"
			"particle"	"particles/b33w3/b33w3.vpcf"
			"particle"	"particles/units/heroes/hero_viper/viper_viper_strike_debuff.vpcf"
		}
		"OnAbilityPhaseStart"
		{
			"FireEffect"
			{
				"EffectName"	"particles/b33w/b33w.vpcf"
				"EffectAttachType"	"attach_origin"
				"ControlPointEntities"
				{
					"CASTER"	"attach_bow_eyes"
					"CASTER"	"attach_bow_eyes"
				}
			}
		}
		"OnSpellStart"
		{
			"TrackingProjectile"
			{
				"Target"	"TARGET"
				"EffectName"	"particles/b33w3/b33w3.vpcf"
				"Dodgeable"	"1"
				"ProvidesVision"	"0"
				"MoveSpeed"	"%projectile_speed"
				"SourceAttachment"	"DOTA_PROJECTILE_ATTACHMENT_NONE"
			}
			"FireSound"
			{
				"EffectName"	"Hero_Viper.viperStrike"
				"Target"	"CASTER"
			}
		}
		"OnProjectileHitUnit"
		{
			"FireSound"
			{
				"EffectName"	"Hero_Viper.viperStrikeImpact"
				"Target"	"TARGET"
			}
			"ApplyModifier"
			{
				"ModifierName"	"modifier_viper_strike_debuff_datadriven"
				"Target"	"TARGET"
			}
			"ApplyModifier"
			{
				"ModifierName"	"modifier_viper_strike_slow_datadriven"
				"Target"	"TARGET"
			}
		}
		"Modifiers"
		{
			"modifier_viper_strike_debuff_datadriven"
			{
				"IsDebuff"	"1"
				"Duration"	"%duration"
				"StatusEffectName"	"particles/status_fx/status_effect_poison_viper.vpcf"
				"StatusEffectPriority"	"15"
				"OnCreated"
				{
					"AttachEffect"
					{
						"EffectName"	"particles/units/heroes/hero_viper/viper_viper_strike_debuff.vpcf"
						"EffectAttachType"	"attach_hitloc"
						"Target"	"TARGET"
					}
				}
				"ThinkInterval"	"1.0"
				"OnIntervalThink"
				{
					"Damage"
					{
						"Target"	"TARGET"
						"Type"	"DAMAGE_TYPE_MAGICAL"
						"Damage"	"%damage"
					}
				}
				"IsPurgable"	"1"
			}
			"modifier_viper_strike_slow_datadriven"
			{
				"IsHidden"	"1"
				"IsPurgable"	"1"
				"Attributes"	"MODIFIER_ATTRIBUTE_MULTIPLE"
				"Properties"
				{
					"MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"	"%bonus_movement_speed_small"
					"MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"	"%bonus_attack_speed_small"
				}
				"Duration"	"%duration"
				"IsDebuff"	"1"
			}
		}
		// Special
		// -------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"	"FIELD_FLOAT"
				"duration"	"5 6 7 8"
			}
			"02"
			{
				"var_type"	"FIELD_INTEGER"
				"damage"	"50 80 110 170"
			}
			"03"
			{
				"var_type"	"FIELD_INTEGER"
				"bonus_movement_speed"	"-10 -20 -30 -40"
			}
			"04"
			{
				"var_type"	"FIELD_INTEGER"
				"bonus_attack_speed"	"-10 -20 -30 -40"
			}
			"05"
			{
				"var_type"	"FIELD_INTEGER"
				"mana_cost_scepter"	"125 125 125"
			}
			"06"
			{
				"var_type"	"FIELD_FLOAT"
				"cooldown_scepter"	"12.0 12.0 12.0"
			}
			"07"
			{
				"var_type"	"FIELD_INTEGER"
				"cast_range_scepter"	"900"
			}
			"08"
			{
				"var_type"	"FIELD_INTEGER"
				"projectile_speed"	"1750"
			}
			// These are for the dissipating attack and movement slow over time
			"09"
			{
				"var_type"	"FIELD_INTEGER"
				"bonus_movement_speed_small"	"-10 -20 -30 -40"
			}
			"10"
			{
				"var_type"	"FIELD_INTEGER"
				"bonus_attack_speed_small"	"-10 -20 -30 -40"
			}
		}
	}

	// Rewrite of the Viper Viper Strike ability
	// Author: Pizzalol
	// Date: 19.12.2014.
	// Changed: 15.01.2015.
	// NOTE: Wonky projectile particle
	// NOTE2: Edit the warmup particle and delete 3 out of 4 children for it to work properly (thanks to Noya for the info)
	"B33E"
	{
		// General
		// -------------------------------------------------------------------------------------------------------------
		"BaseClass"	"ability_datadriven"
		"AbilityTextureName"	"B33E"
		"AbilityBehavior"	"DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
		"AbilityUnitTargetType"	"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
		"AbilityUnitTargetTeam"	"DOTA_UNIT_TARGET_TEAM_ENEMY"
		"AbilityUnitTargetFlags"	"DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
		"AbilityUnitDamageType"	"DAMAGE_TYPE_MAGICAL"
		"SpellImmunityType"	"SPELL_IMMUNITY_ENEMIES_YES"
		"FightRecapLevel"	"2"
		"AbilityType"	"DOTA_ABILITY_TYPE_BASIC"
		"AbilityCastPoint"	"0.3"
		"AbilityCastAnimation"	"ACT_DOTA_ATTACK"
		"AnimationPlaybackRate"	"2"
		// Time
		// -------------------------------------------------------------------------------------------------------------
		"AbilityCooldown"	"22 20 18 16"
		// Cost
		// -------------------------------------------------------------------------------------------------------------
		"AbilityManaCost"	"120 140 160 180"
		// Casting
		// -------------------------------------------------------------------------------------------------------------
		"AbilityCastRange"	"800"
		// Precache
		// -------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"soundfile"	"soundevents/game_sounds_heroes/game_sounds_viper.vsndevts"
			"particle"	"particles/b33e2/b33e2.vpcf"
			"particle"	"particles/b33e/b33e.vpcf"
			"particle"	"particles/units/heroes/hero_broodmother/broodmother_incapacitatingbite_debuff.vpcf"
			"particle"	"particles/b33e2/b33e2.vpcf"
			"particle"	"particles/b33e/b33e.vpcf"
			"particle"	"particles/units/heroes/hero_broodmother/broodmother_incapacitatingbite_debuff.vpcf"
		}
		"OnAbilityPhaseStart"
		{
			"FireEffect"
			{
				"EffectName"	"particles/b33e2/b33e2.vpcf"
				"EffectAttachType"	"attach_origin"
				"ControlPointEntities"
				{
					"CASTER"	"attach_bow_eyes"
					"CASTER"	"attach_bow_eyes"
				}
			}
		}
		"OnSpellStart"
		{
			"TrackingProjectile"
			{
				"Target"	"TARGET"
				"EffectName"	"particles/b33e/b33e.vpcf"
				"Dodgeable"	"1"
				"ProvidesVision"	"0"
				"MoveSpeed"	"%projectile_speed"
				"SourceAttachment"	"DOTA_PROJECTILE_ATTACHMENT_NONE"
			}
			"FireSound"
			{
				"EffectName"	"Hero_Viper.viperStrike"
				"Target"	"CASTER"
			}
		}
		"OnProjectileHitUnit"
		{
			"FireSound"
			{
				"EffectName"	"Hero_Viper.viperStrikeImpact"
				"Target"	"TARGET"
			}
			"ApplyModifier"
			{
				"ModifierName"	"modifier_b33e_debuff_datadriven"
				"Target"	"TARGET"
			}
			"ApplyModifier"
			{
				"ModifierName"	"modifier_b33e_slow_datadriven"
				"Target"	"TARGET"
			}
		}
		"Modifiers"
		{
			"modifier_b33e_debuff_datadriven"
			{
				"IsDebuff"	"1"
				"Duration"	"%duration"
				"ThinkInterval"	"1.0"
				"OnIntervalThink"
				{
					"Damage"
					{
						"Target"	"TARGET"
						"Type"	"DAMAGE_TYPE_MAGICAL"
						"Damage"	"%damage"
					}
				}
				"IsPurgable"	"1"
				"EffectName"	"particles/units/heroes/hero_broodmother/broodmother_incapacitatingbite_debuff.vpcf"
				"EffectAttachType"	"follow_hitloc"
				"Properties"	{}
				"States"
				{
					"MODIFIER_STATE_SOFT_DISARMED"	"MODIFIER_STATE_VALUE_ENABLED"
					"MODIFIER_STATE_ROOTED"	"MODIFIER_STATE_VALUE_ENABLED"
				}
			}
			"modifier_b33e_slow_datadriven"
			{
				"IsHidden"	"1"
				"IsPurgable"	"1"
				"Attributes"	"MODIFIER_ATTRIBUTE_MULTIPLE"
				"Properties"	{}
				"Duration"	"%duration"
				"IsDebuff"	"1"
			}
		}
		// Special
		// -------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"	"FIELD_FLOAT"
				"duration"	"1 2 3 4"
			}
			"02"
			{
				"var_type"	"FIELD_INTEGER"
				"damage"	"150"
			}
			"03"
			{
				"var_type"	"FIELD_INTEGER"
				"projectile_speed"	"1750"
			}
		}
	}

	// Rewrite of Templar Assasssin Psi Blades
	// Author: YOLOSPAGHETTI
	// Date: April 2, 2016
	// Version: 6.86
	// Type: Datadriven
	//
	// ----- FILE REQUIREMENTS -----
	// Script files:
	// scripts/vscripts/heroes/hero_templar_assassin/psi_blades.lua
	"B33R"
	{
		// General
		// -------------------------------------------------------------------------------------------------------------
		"BaseClass"	"ability_datadriven"
		"AbilityTextureName"	"bristleback_viscous_nasal_goo"
		"AbilityBehavior"	"DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_NO_TARGET"
		"AbilityUnitTargetType"	"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC "
		"AbilityUnitTargetTeam"	"DOTA_UNIT_TARGET_TEAM_ENEMY"
		"AbilityUnitDamageType"	"DAMAGE_TYPE_PURE"
		"SpellImmunityType"	"SPELL_IMMUNITY_ENEMIES_YES"
		"AbilityCooldown"	"16 13 10 7"
		"AbilityManaCost"	"60 60 60 60"
		"precache"
		{
			"particle"	"particles/b33r2/b33r2.vpcf"
			"particle"	"particles/b33r3/b33r3.vpcf"
			"particle"	"particles/b33r/b33r.vpcf"
			"particle"	"particles/b33r/b33r.vpcf"
		}
		"OnSpellStart"
		{
			"ApplyModifier"
			{
				"Target"	"CASTER"
				"ModifierName"	"modifier_psi_blades"
			}
		}
		"Modifiers"
		{
			"modifier_psi_blades"
			{
				"Passive"	"0"
				"IsHidden"	"0"
				"OnAttackLanded"
				{
					"RunScript"
					{
						"ScriptFile"	"scripts/vscripts/heroes/B_Unified/B33.lua"
						"Function"	"CheckAngles"
						"particle"	"particles/b33r2/b33r2.vpcf"
						"damage"	"%attack_damage"
					}
				}
				"Properties"
				{
					"MODIFIER_PROPERTY_ATTACK_RANGE_BONUS"	"%bonus_attack_range"
				}
				"Orb"
				{
					"Priority"	"DOTA_ORB_PRIORITY_ABILITY"
					"ProjectileName"	"particles/b33r/b33r.vpcf"
				}
				"Duration"	"%duration"
				"AllowIllusionDuplicate"	"1"
			}
		}
		// Special
		// -------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"	"FIELD_INTEGER"
				"bonus_attack_range"	"60 120 180 240"
			}
			"02"
			{
				"var_type"	"FIELD_INTEGER"
				"attack_spill_range"	"400"
			}
			"03"
			{
				"var_type"	"FIELD_INTEGER"
				"range_damage"	"40 60 80 120"
			}
			"04"
			{
				"var_type"	"FIELD_INTEGER"
				"agility_bonus"	"5 10 15 20"
			}
			"05"
			{
				"var_type"	"FIELD_INTEGER"
				"duration"	"8"
			}
		}
	}

	// Rewrite of the Broodmother Spawn Spiderlings ability
	// Author: Pizzalol
	// Date: November 28, 2015
	// Version: 6.85
	// Type: Datadriven
	// Notes: Uses the normal dota spiderlings NOT custom ones
	"B33T"
	{
		// General
		// -------------------------------------------------------------------------------------------------------------
		"BaseClass"	"ability_datadriven"
		"AbilityTextureName"	"broodmother_insatiable_hunger"
		"AbilityBehavior"	"DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
		"AbilityUnitTargetType"	"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
		// Unit Targeting
		// -------------------------------------------------------------------------------------------------------------
		"AbilityUnitTargetTeam"	"DOTA_UNIT_TARGET_TEAM_ENEMY"
		"AbilityUnitDamageType"	"DAMAGE_TYPE_MAGICAL"
		"SpellImmunityType"	"SPELL_IMMUNITY_ENEMIES_NO"
		"FightRecapLevel"	"1"
		"AbilityType"	"DOTA_ABILITY_TYPE_ULTIMATE"
		"AbilityCastPoint"	"0.2 0.2 0.2 0.2"
		"AbilityCooldown"	"10.0 10.0 10.0 10.0"
		"AbilityManaCost"	"120 120 120 120"
		// Stats
		// -------------------------------------------------------------------------------------------------------------
		"AbilityCastRange"	"700"
		// Precache
		// -------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"particle"	"sounds/weapons/hero/broodmother/spiderling_hatch.vsnd"
			"soundfile"	"sounds/vo/broodmother/broo_win_01.vsnd"
			"soundfile"	"sounds/weapons/hero/broodmother/spiderling_hatch.vsnd"
			"soundfile"	"sounds/vo/broodmother/broo_win_01.vsnd"
			"soundfile"	"soundevents/game_sounds_heroes/game_sounds_broodmother.vsndevts"
			"soundfile"	"soundevents/voscripts/game_sounds_vo_broodmother.vsndevts"
			"particle"	"particles/b33t7/b33t7.vpcf"
		}
		"OnSpellStart"
		{
			"FireSound"
			{
				"EffectName"	"Hero_Broodmother.SpawnSpiderlings"
				"Target"	"CASTER"
			}
			"RunScript"
			{
				"ScriptFile"	"scripts/vscripts/heroes/B_Unified/B33.lua"
				"Function"	"B33T"
			}
			"FireSound"
			{
				"Target"	"CASTER"
				"EffectName"	"broodmother_broo_win_01"
			}
		}
		"Modifiers"
		{
			"modifier_spawn_spiderlings_datadriven"
			{
				"Duration"	"%duration"
				"IsDebuff"	"1"
				"EffectName"	"particles/b33t7/b33t7.vpcf"
				"EffectAttachType"	"follow_hitloc"
				"OnIntervalThink"
				{
					"Damage"
					{
						"Target"	"TARGET"
						"Type"	"DAMAGE_TYPE_MAGICAL"
						"Damage"	"%damage"
					}
				}
				"ThinkInterval"	"0.5"
				"IsPurgable"	"0"
				"Properties"
				{
					"MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT"	"%attack_speed"
					"MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"	"%speed"
				}
			}
		}
		// Special
		// -------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"	"FIELD_FLOAT"
				"duration"	"14"
			}
			"02"
			{
				"var_type"	"FIELD_INTEGER"
				"damage"	"66 144 256"
			}
			"03"
			{
				"var_type"	"FIELD_INTEGER"
				"projectile_speed"	"1200"
			}
			"04"
			{
				"var_type"	"FIELD_INTEGER"
				"speed"	"-50"
			}
			"05"
			{
				"var_type"	"FIELD_INTEGER"
				"attack_speed"	"-100"
			}
		}
		// Stats
		// -------------------------------------------------------------------------------------------------------------
		// Modifier has no support value
		"AbilityModifierSupportValue"	"0.0"
	}
}
